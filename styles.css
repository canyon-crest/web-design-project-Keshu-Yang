html,*,*::before,*::after{ box-sizing: border-box; }

html,body{
    /* prevent horizontal scrolling at any screen size */
    overflow-x: hidden;
}

body{
    /* Static linear gradient background (replaces animated layered background) */
    background: linear-gradient(135deg, #022b1f 0%, #0b6b4a 50%, #5ead76 100%);
    color:#fff;
    font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    font-weight:bolder;
    font-display: auto;
    background-attachment: fixed;
    background-repeat: no-repeat;
}
#container{
    max-width:1000px;
    width: 100%;
    margin: 0 auto;
    padding:14px 48px;
    border-left:5px double white;
    border-right:5px double white;
    background-color:#5ead76;
    display:flow-root;
    position: relative; /* allow absolutely-positioned overlays inside */

}
/* Ensure sidebar stays in normal document flow and does not change position during scroll */
#sidebar{
    /* make sidebar positioned and on top of everything */
    position: relative !important;
    top: auto !important;
    transform: none !important;
    overflow: visible !important; /* allow expanded content to show */
    z-index: 2147483647 !important; /* maximum z-index to ensure it's on top */
}
h1{
    position:relative;
    background-color: white;
    border: 3px solid black;
    border-radius: 10px;
    color: black;
    padding: 15px;
    text-align: center;
    width: 60%;
    margin: 8px auto 20px;
    font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.7); 
    font-size:3em;

}
h2{
    font-size: 1.3em;
    text-align: center;
    font-style: italic;
}
h3{
    border-left: 20px double white;
    padding-left: 18px;
    border-radius: 15px;
    border-bottom:2px solid #ccc;
    width: 130px;
    background-color:#118000;
    font-weight:bold;
    margin: 20px 10px;
    text-align: center;
}
p{
    line-height: 2em;
    padding: 20px;
    border:2px dotted black;
    background-color:#40b4b4;
    color:#ffffff;
    border-radius: 15px;
    transition: transform 220ms cubic-bezier(.2,.9,.3,1), box-shadow 220ms ease, padding 220ms ease;
}
img{
    max-width:100%;
    width:300px;
    height: auto;
    float:left;
    margin-right:1em;
    border: 2px solid white;
    border-radius: 15px;
}
/*PSEUDO SELECTORS*/
a:link{
    color:red;
    text-decoration: none;
    font-weight:bold;
}
a:visited{
    color: rgb(148, 0, 0);
}
a:hover{
    color:rgb(255, 154, 154);
    text-decoration:underline;
}
a:active{
    color:white;
}
#pic1{
    width:350px;
}
#pic2{
    float:right;
    margin-left:10px;
    margin-right: 0;
}
#pic3{
    width:350px;
}
#p2{
    background-color: #349191;
}
.highlight{
    background-color: rgba(0, 131, 213, 0.694);
    color: black;
    padding: 2px;
    border-radius: 2px;
    font-weight:bold;

}
.greentext{
    color:#094200;
}
#sidebar{
    background-color:#349191;
    width:185px;
    line-height:2.35em;
    border:2px solid white;
    float:right;
    margin:20px;
    margin-top:80px;
    border-radius:10px;
    /* keep sidebar in the normal document flow (not sticky) so it doesn't change position while scrolling */
    position: static;
    pointer-events: auto;
    transition: width 260ms cubic-bezier(.2,.9,.3,1), box-shadow 260ms ease, transform 260ms ease;
}
/* Expand the sidebar to match the pop effect when pointer is on it (desktop) */
#sidebar:hover,
#sidebar:focus-within{
    width: 215px; /* reduced expansion for a subtler effect */
    box-shadow: 0 22px 46px rgba(2,6,23,0.38);
    transform: translateX(0);
}
#sidebar h3{
    border:none;
    text-align:center;
    padding:5px;
    margin: 8px auto;
    border:1px dotted white;
}
li{
    font-style:oblique;
}
@media(max-width:1200px){
    #container{
        background-color:#59a36f;
        width: 800px;
    }
}
@media(max-width:992px){
    #container{
        background-color:#549f6a;
        width:100%;
    }
    body,p,#container,#p2{
        margin:0;
        border:none;
        padding:0;
        background-color:#5ab074;
    }
    p,#p2{
        padding:14px;
    }
}
@media(max-width:768px){
    /* Completely hide the sidebar on small screens */
    #sidebar{
        display: none !important;
        pointer-events: none !important;
    }
    #sidebar::before{ display: none !important; }
    /* Collapse the sidebar into a narrow handle that expands on hover/focus.
       Keep it in the normal document flow (no fixed/sticky) so its position doesn't change while scrolling. */
    #p3{
        margin-bottom:40px;
    }
    #sidebar{
        /* keep in-flow but allow overlay expansion inside the container */
        position: absolute;
        right: 12px;
        top: 70px;
        width: 48px; /* collapsed width */
        overflow: hidden;
        padding: 8px 6px;
        border-radius: 12px;
        transition: width 260ms cubic-bezier(.2,.9,.3,1), box-shadow 260ms ease, background 260ms ease;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border: 1px solid rgba(255,255,255,0.04);
        box-shadow: 0 8px 18px rgba(0,0,0,0.10);
        margin: 12px 8px; /* smaller margins for mobile */
        pointer-events: auto;
        height: auto;
    }
    /* Expand when the user hovers or focuses inside the sidebar (keyboard accessible) */
    #sidebar:hover,
    #sidebar:focus-within{
        width: 180px; /* reduced mobile expansion when active */
        right: 6px; /* nudge to keep overlay inside container */
    }
    /* Keep the sidebar expanded while the surrounding container or the first paragraph is active.
       This allows the user to move the pointer from #p1 to #sidebar without it collapsing. */
    #container:hover #sidebar,
    #container:focus-within #sidebar,
    #p1:hover + #sidebar,
    #p1:focus-within + #sidebar{
        width: 220px;
        right: 6px;
    }

    /* visible handle so users know something is tappable */
    #sidebar::before{
        content: "\2630"; /* hamburger-style handle */
        display: block;
        text-align: center;
        font-size: 18px;
        color: rgba(255,255,255,0.75);
        margin-bottom: 8px;
        pointer-events: none;
    }
    /* keep header compact */
    h1{
        border:none;
        background:none;
        width:90%;
    }
    img,#pic1{
        width:240px;
    }
}
.text-shadow{
  text-shadow: 1px 1px rgba(0,173,181,.2882),
  2px 2px rgba(102, 237, 201, 0.288),
  3px 3px rgba(72, 213, 223, 0.288),
  4px 4px rgba(0, 151, 181, 0.288);
  animation: rotate ease-in-out 1s infinite alternate;
}
@keyframes rotate {
    0% {
        transform: rotate(3deg);
    }
    100% {
        transform: rotate(-3deg);
    }
}

@keyframes gradientBackground {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

@keyframes fadeIn {
    0% {
        opacity: 0;
    }
    66% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
.enter {
  opacity: 0;
  transform: translateY(20px) scale(0.98);
  will-change: transform, opacity;
  animation: imgEnter 1.3s cubic-bezier(.22,.9,.36,1) forwards;
}

@keyframes imgEnter {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* --- Begin merged extras.css --- */

:root{
    --bg-anim-duration: 16s;
    --glow-color-1: rgba(45,212,191,0.16);
    --glow-color-2: rgba(255,209,102,0.12);
    --glow-color-3: rgba(130,88,255,0.08);
}

html,body{
    height:100%;
}

body::before{
    content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    background: linear-gradient(120deg, rgba(2,6,23,0.95) 0%, rgba(2,45,65,0.92) 30%, rgba(1,70,80,0.86) 60%, rgba(10,35,60,0.9) 100%);
    background-size: 200% 200%;
    animation: bgShift var(--bg-anim-duration) ease-in-out infinite;
    pointer-events: none;
    opacity: 0.95;
}

body::after{
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image: radial-gradient(35% 30% at 10% 20%, var(--glow-color-1), transparent 10%),
                                        radial-gradient(30% 25% at 85% 75%, var(--glow-color-2), transparent 12%),
                                        radial-gradient(20% 18% at 60% 30%, var(--glow-color-3), transparent 12%);
    background-repeat: no-repeat;
    opacity: 0.9;
    transition: opacity 400ms ease;
}

@keyframes bgShift{
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* gentle card lift on focus/hover for keyboard accessibility */
#container p:focus-within,
#container p:hover{
    transform: translateY(-6px);
    box-shadow: 0 16px 36px rgba(2,6,23,0.3);
}

/* Slightly enlarge the block when hovered or focused to create a pop-up effect (vertical only) */
#p1:hover,#p1:focus-within,#p2:hover,#p2:focus-within,#p3:hover,#p3:focus-within{
    /* lift the paragraph and increase its vertical padding only (no horizontal scaling) */
    transform: translateY(-8px);
    padding-top: 26px;
    padding-bottom: 26px;
    box-shadow: 0 22px 48px rgba(2,6,23,0.34);
}

/* Paragraph entrance animation */
.p-enter{
    opacity: 0;
    transform: translateY(12px) scale(0.995);
    animation: paraEnter 700ms cubic-bezier(.22,.9,.36,1) forwards;
}

@keyframes paraEnter{
    0%{ opacity: 0; transform: translateY(12px) scale(0.995); }
    60%{ opacity: 1; transform: translateY(-6px) scale(1.01); }
    100%{ opacity: 1; transform: translateY(0) scale(1); }
}

/* Stagger paragraphs for a subtle cascading entrance */
p:nth-of-type(1) { animation-delay: 80ms; }
p:nth-of-type(2) { animation-delay: 180ms; }
p:nth-of-type(3) { animation-delay: 280ms; }
p:nth-of-type(4) { animation-delay: 380ms; }
p:nth-of-type(5) { animation-delay: 480ms; }

@media (prefers-reduced-motion: reduce){
    .p-enter, p { animation: none !important; transform: none !important; }
}

/* Respect users who prefer reduced motion */
@media (prefers-reduced-motion: reduce){
    p, #container p:focus-within, #container p:hover{
        transition: none !important;
        transform: none !important;
        box-shadow: none !important;
    }
}

/* Expand sidebar and amplify styles when the first paragraph (#p1) is hovered or focused.
   Uses the :has() relational selector; works in modern browsers (Chrome, Edge, Safari).
   Fallback: sidebar still expands on its own hover/focus-within (defined earlier). */
/* Sidebar will no longer expand when paragraph 1 is hovered; it only expands on direct sidebar hover/focus. */

/* Pop-up / highlight other things inside #p1 when hovered or focused */
#p1:hover,
#p1:focus-within{
    transform: translateY(-8px) scale(1.006);
    box-shadow: 0 22px 48px rgba(2,6,23,0.34);
}

/* emphasize inline highlights when their paragraph is active (hover or focus) */
p:hover .highlight,
p:focus-within .highlight,
#p1:hover .highlight,
#p1:focus-within .highlight{
    background-color: rgba(255,215,102,0.98);
    color: #061418;
    transform: translateY(-4px);
    box-shadow: 0 10px 22px rgba(2,6,23,0.28);
    transition: transform 220ms ease, box-shadow 220ms ease, background-color 220ms ease;
}

/* style links inside an active paragraph, but exclude the Calc III link and links inside .greentext */
#p1:hover a:not([href*="calc-3-and-linear-algebra"]),
#p1:focus-within a:not([href*="calc-3-and-linear-algebra"]){
    color: #061418;
    text-shadow: 0 2px 10px rgba(0,0,0,0.15);
    background: linear-gradient(90deg, rgba(45,212,191,0.14), rgba(255,209,102,0.06));
    padding: 2px 4px;
    border-radius: 6px;
}

/* No special overrides for the Calc III linkâ€”it's excluded above so it inherits site link colors */

/* Prevent links inside .greentext from changing color or receiving highlight styles (Calc III) */
p:hover .greentext a,
p:focus-within .greentext a,
#p1:hover .greentext a,
#p1:focus-within .greentext a{
    color: inherit !important;
    background: none !important;
    padding: 0 !important;
    border-radius: 0 !important;
    text-shadow: none !important;
}


/* Mirror behavior: when user hovers/focuses the sidebar, make #p1 appear active too */
#container:has(#sidebar:hover) #p1,
#container:has(#sidebar:focus-within) #p1{
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 22px 48px rgba(2,6,23,0.34);
}

#container:has(#sidebar:hover) #p1 .highlight,
#container:has(#sidebar:focus-within) #p1 .highlight{
    background-color: rgba(255,215,102,0.98);
    color: #061418;
    transform: translateY(-4px);
    box-shadow: 0 10px 22px rgba(2,6,23,0.28);
}

#container:has(#sidebar:hover) #p1 a,
#container:has(#sidebar:focus-within) #p1 a{
    color: #061418;
    text-shadow: 0 2px 10px rgba(0,0,0,0.15);
    background: linear-gradient(90deg, rgba(45,212,191,0.14), rgba(255,209,102,0.06));
    padding: 2px 4px;
    border-radius: 6px;
}

/* image tilt effect using transform + perspective; no JS */
img {
    transition: transform 260ms cubic-bezier(.2,.9,.3,1), box-shadow 260ms ease;
    transform-origin: center center;
    will-change: transform;
}

/* on hover, apply a small rotateX + rotateY feel using transform */
img:hover{
    transform: perspective(700px) translateY(-6px) rotateX(3deg) rotateY(-4deg) scale(1.02);
}

/* subtle shine using pseudo-element on images (covers only image element) */
img{
    position: relative;
}

img::after{
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(120deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.02) 35%, rgba(255,255,255,0.12) 60%, rgba(255,255,255,0) 100%);
    transform: translateX(-40%);
    transition: transform 800ms cubic-bezier(.22,.9,.36,1), opacity 300ms ease;
    opacity: 0.6;
    border-radius: inherit;
}

img:hover::after{
    transform: translateX(40%);
    opacity: 0.95;
}

/* keep extras lightweight on small screens */
@media (max-width: 600px){
    body::before { opacity: 0.85; }
    body::after { opacity: 0.55; }
    img:hover{ transform: translateY(-4px) scale(1.01); }
    img::after{ transition-duration: 600ms; }
}
